{% extends "base.html" %}

{% load static %}
{% block dependencies %}
{% load tz %}
{% endblock dependencies %}

{% block content %}

<nav>
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'institutionlist' %}">Institutionenliste</a></li>
        <li class="breadcrumb-item"><a href="{{ documenttitle.parent_institution.get_absolute_url }}">{{ documenttitle.parent_institution }}</a></li>
        <li class="breadcrumb-item"><a href="{{ documenttitle.parent_refnumber.get_absolute_url }}">{{ documenttitle.parent_refnumber }}</a></li>
        <li class="breadcrumb-item"><a href="{{ documenttitle.get_absolute_url }}">{{ documenttitle }}</a></li>
        <li class="breadcrumb-item active" aria-current="page">Versionen</li>
    </ol>
</nav>

<div>
    <h2>{{ documenttitle.title_name }}</h2>
</div>

<div class="card">
    <div class="card-header" data-toggle="collapse" href="#DocumentOverview">
        <a class="card-link">Übersicht</a>
    </div>

    <div id="DocumentOverview" class="collapse show">
        <div class="card-body">
            <div class="row">
                <div class="col-sm-4">
                    Institution
                </div>
                <div class="col-sm-8">
                    {{ documenttitle.parent_institution }}
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4">
                    Signatur
                </div>
                <div class="col-sm-8">
                    {{ documenttitle.parent_refnumber }} {{ documenttitle.parent_refnumber.refnumber_title }}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header" data-toggle="collapse" href="#DocumentTranscription">
        <a class="card-link">Versionen</a>
    </div>

    <div id="DocumentTranscription" class="collapse show">
        <div class="card-body">
            {% for version in versions %}
            {% if forloop.counter <= 3 %}
            <a href="{{ version.get_absolute_version_url }}">
                <div class="row display-list-element">
                    <div class="col-sm-4">
                        {% if forloop.first %}
                        Aktuelle Version
                        {% else %}
                        Version {{ version.version_number }}
                        {% endif %}
                    </div>
                    <div class="col-sm text-left">
                        {{ version.commit_message }}
                    </div>
                    <div class="col-sm text-left">
                        {{ version.document_utc_add }}
                    </div>
                    <div class="col-sm text-left">
                        {{ version.submitted_by }}
                    </div>
                </div>
            </a>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</div>


{% endblock content %}