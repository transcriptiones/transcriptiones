{% extends "base.html" %}
{% load static %}
{% block dependencies %}
<link rel="stylesheet" href="{% static 'upload/formvalidation.css' %}" />
<script src="{% static 'upload/ckeditor5/build/ckeditor.js' %}"></script>
{% endblock dependencies %}

{% block content %}
<form action="{% url 'edittranscript' documenttitle.parent_institution.institution_slug documenttitle.parent_refnumber.refnumber_slug documenttitle.document_slug  %}" method="post" id="editTranscriptForm" class="needs-validation" novalidate>
    {% csrf_token %}
    {{ form.non_field_errors }}
    <div class="card">
        <div class="card-header" data-toggle="collapse" href="#requiredFields">
            <a class="card-link">
                Pflichtfelder
            </a>
        </div>
        <div id="requiredFields" class="collapse show">
            <div class="card-body">
                <div class="fieldWrapper form-group row">
                    {{ form.commit_message.errors }}
                    <div class="col-sm-3">
                        <label for="{{ form.commit_message.id_for_label }}" class="control-label">
                            {{ form.commit_message.label }}
                        </label>
                    </div>
                    <div class="col-sm-9">
                        {{ form.commit_message }}
                        <span class="error"></span>
                    </div>
                </div>
                <div class="fieldWrapper form-group row">
                    {{ form.transcription_scope.errors }}
                    <div class="col-sm-3">
                        <label for="{{ form.transcription_scope.id_for_label }}" class="control-label">
                            {{ form.transcription_scope.label }}
                        </label>
                    </div>
                    <div class="col-sm-9">
                        {{ form.transcription_scope }}
                        <span class="error"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header" data-toggle="collapse" href="#transcript">
            <a class="card-link">
                Transkription
            </a>
        </div>
        <div id="transcript" class="collapse show">
            <div class="card-body">
                <div>
                    <div class="fieldWrapper form-group row">
                        {{ form.transcription_text.errors }}
                        <div class="col-sm-3">
                            <label for="{{ form.transcription_text.id_for_label }}" class="control-label">
                                {{ form.transcription_text.label }}
                            </label>
                        </div>
                        <div class="col-sm-9">
                            {{ form.transcription_text }}
                            <span class="error"></span>
                        </div>
                    </div>
                    <div class="fieldWrapper form-group" title="{{ form.submitted_by_anonymous.help_text }}">
                        {{ form.submitted_by_anonymous }}
                        <label for="{{ form.submitted_by_anonymous.id_for_label }}" class="control-label align-middle ml-2">
                            {{ form.submitted_by_anonymous.label }}
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <button type="button" class="btn btn-secondary" id="submitButtonDocument">Absenden</button> <!-- Does this still work with a different value? -->
</form>

<div class="container" id="smallnote">
    <p>
        Die mit einem Stern markierten Felder sind Pflichtfelder.
    </p>
</div>


{% endblock content %}

{% block javascript %}
<script src="{% static 'upload/edittranscriptscripts.js' %}"></script>
{% endblock javascript %}
