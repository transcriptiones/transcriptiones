{% extends 'base.html' %}

{% block content %}

<div>
    <h2>Nutzerprofil</h2>
</div>

<div class="card">
    <div class="card-header" data-toggle="collapse" href="#userinfo">
        <a class="card-link">Meine persönlichen Daten</a>
    </div>
    <div id="userinfo" class="collapse show">
        <div class="card-body">
            <div class="row">
                <div class="col-sm-6 text-left font-weight-bold">Benutzername</div>
                <div class="col-sm-6 text-left">{{ user.username }}</div>
            </div>
            <div class="row">
                <div class="col-sm-6 text-left font-weight-bold">Vorname</div>
                <div class="col-sm-6 text-left">{{ user.first_name }}</div>
            </div>
            <div class="row">
                <div class="col-sm-6 text-left font-weight-bold">Nachname</div>
                <div class="col-sm-6 text-left">{{ user.last_name }}</div>
            </div>
            <div class="row">
                <div class="col-sm-6 text-left font-weight-bold">E-Mail-Adresse</div>
                <div class="col-sm-6 text-left">{{ user.email }}</div>
            </div>
            <div class="row">
                <div class="col-sm-6 text-left font-weight-bold">Transkriptionen anonym publizieren</div>
                <div class="col-sm-6 text-left">
                    {% if user.anonymous_publication %}
                    Ja
                    {% else %}
                    Nein
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
<div class="card">
    <div class="card-header" data-toggle="collapse" href="#useractivity">
        <a class="card-link">Meine persönlichen Daten</a>
    </div>
    <div id="useractivity" class="collapse show">
        <div class="card-body">
            <div class="row border-bottom p-2 mb-2">
                <div class="col-sm text-left font-weight-bold">
                    Titel
                </div>
                <div class="col-sm text-left font-weight-bold">
                    Art des Beitrags
                </div>
                <div class="col-sm text-left font-weight-bold">
                    Zeitpunkt der Aktivität
                </div>
                <div class="col-sm text-left font-weight-bold">
                    Änderungen
                </div>
                <div class="col-sm text-left font-weight-bold">
                    Letzte Änderung am
                </div>
                <div class="col-sm text-left font-weight-bold">
                    Letzte Änderung durch
                </div>
            </div>
            {% for document in contributions %}
            <a href="{{ document.get_absolute_version_url }}" class="row display-list-element">
                <div class="col-sm text-left">{{ document.title_name }}</div>
                <div class="col-sm text-left">
                    {% if document.version_number == 1 %}
                    Upload
                    {% else %}
                    Bearbeitung
                    {% endif %}
                </div>
                <div class="col-sm text-left">{{ document.document_utc_add }}</div>
                <div class="col-sm text-left">{{ document.commit_message }}</div>
                <div class="col-sm text-left">{{ document.get_versions.latest.document_utc_add }}</div>
                <div class="col-sm text-left">
                    {% if document.get_versions.latest.submitted_by_anonymous %}
                    Anonym
                    {% else %}
                    {{ document.get_versions.latest.submitted_by }}
                    {% endif %}
                </div>
            </a>
            {% endfor %}
            <nav class="row" aria-label="page navigation">
                <ul class="pagination mx-auto">
                    <li class="page-item{% if not contributions.has_previous %} disabled{% endif %}">
                        <a class="page-link" href="?page=1"><i class="fas fa-angle-double-left"></i></a>
                    </li>
                    <li class="page-item{% if not contributions.has_previous %} disabled{% endif %}">
                        <a class="page-link" href="{% if contributions.has_previous %}?page={{ contributions.previous_page_number }}{% else %}#{% endif %}"><i class="fas fa-angle-left"></i></a>
                    </li>
                    {% for page in contributions.paginator.page_range %}
                    <li class="page-item{% if page == contributions.number %} active" aria-current="page{% endif %}">
                        <a class="page-link" href="?page={{ page }}">{{ page }}</a>
                    </li>
                    {% endfor %}
                    <li class="page-item{% if not contributions.has_next %} disabled{% endif %}">
                        <a class="page-link" href="{% if contributions.has_next %}?page={{ contributions.next_page_number }}{% else %}#{% endif %}"><i class="fas fa-angle-right"></i></a>
                    </li>
                    <li class="page-item{% if not contributions.has_next %} disabled{% endif %}">
                        <a class="page-link" href="?page={{ contributions.paginator.num_pages }}"><i class="fas fa-angle-double-right"></i></a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

<div><a href="{% url 'password_change' %}">Passwort ändern</a></div>
<div><a href="{% url 'user_update' %}">Profil anpassen</a></div>
<div><a href="{% url 'logout' %}">Abmelden</a></div>

{% endblock %}