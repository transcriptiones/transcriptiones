{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load django_bootstrap_breadcrumbs %}
{% load transcriptiones %}
{% load crispy_forms_tags %}

{% block dependencies %}
<link rel="stylesheet" href="{% static 'upload/formvalidation.css' %}" />
<script src="{% static 'upload/ckeditor5/build/ckeditor.js' %}"></script>

<!-- Tooltipster Plugin -->
<script src="{% static 'base/vendor/tooltipster/dist/js/tooltipster.bundle.js' %}"></script>
<link rel="stylesheet" href="{% static 'base/vendor/tooltipster/dist/css/tooltipster.bundle.css' %}" />
<link rel="stylesheet" href="{% static 'base/vendor/tooltipster/dist/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-punk.min.css' %}" />
{% endblock dependencies %}

{% block breadcrumb_init %}
    {% breadcrumb _("Institutions list") "main:institution_list" %}
    {% breadcrumb document.parent_ref_number.holding_institution document.parent_ref_number.holding_institution.get_absolute_url %}
    {% breadcrumb document.parent_ref_number document.parent_ref_number.get_absolute_url %}
    {% breadcrumb document.title_name document.get_absolute_url %}
    {% breadcrumb _('Edit transcription') '' %}
{% endblock %}

{% block page_title %}
    {{ documenttitle.title_name }}
{% endblock %}

{% block content %}

    {% card 'edit_transcript_overview' _('Overview') %}
        <!-- % render_table tables.0 %} -->
    {% endcard %}

    <form action="{% url 'main:edit_transcript' document.parent_ref_number.holding_institution.institution_slug document.parent_ref_number.ref_number_slug document.document_slug  %}"
          method="post" id="editTranscriptForm" class="needs-validation" novalidate>
        {% csrf_token %}

        {% card 'edit_transcript_required' _('Required fields') %}
            {{ form.commit_message|as_crispy_field }}
            {{ form.transcription_scope|as_crispy_field }}
        {% endcard %}

        {% card 'edit_transcript_transcript' _('Transcription') %}
            {{ form.transcription_text }}
        {% endcard %}


         <button type="button" class="btn btn-secondary" id="submitButtonDocument">Submit</button> <!-- Does this still work with a different value? -->
    </form>



    <div class="card">
        <div class="card-header" data-toggle="collapse" href="#transcript">
            <a class="card-link">
                Transkription
            </a>
        </div>
        <div id="transcript" class="collapse show">
            <div class="card-body">
                <div>
                    <div class="fieldWrapper form-group row">
                        {{ form.transcription_text.errors }}
                        <div class="col-sm-3">
                            <label for="{{ form.transcription_text.id_for_label }}" class="control-label">
                                {{ form.transcription_text.label }}
                            </label>
                            <i class="fas fa-info-circle tooltipster" data-tooltip-content="#tt_transcription_text"></i>
                        </div>
                        <div class="col-sm-9">
                            {{ form.transcription_text }}
                            <span class="error"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="fieldWrapper form-check col-sm text-right" title="{{ form.submitted_by_anonymous.help_text }}">
            <label for="{{ form.submitted_by_anonymous.id_for_label }}" class="form-check-label tooltipster" data-tooltip-content="#tt_anonymous">
                {{ form.submitted_by_anonymous.label }}
            </label>
        </div>
        <div class="col-sm text-left">
            {{ form.submitted_by_anonymous }}
        </div>
    </div>

</form>

<div class="container" id="smallnote">
    <p>
        Die mit einem Stern markierten Felder sind Pflichtfelder.
    </p>
</div>

{% endblock content %}

{% block javascript %}
<script src="{% static 'upload/edittranscriptscripts.js' %}"></script>
{% endblock javascript %}
