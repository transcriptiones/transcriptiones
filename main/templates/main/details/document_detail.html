{% extends "main/base.html" %}
{% load static %}
{% load i18n %}
{% load transcriptiones %}
{% load render_table from django_tables2 %}
{% load django_bootstrap_breadcrumbs %}

{% block additional_head_tags %}
    <link rel="stylesheet" type="text/css" href="{% static 'main/css/toolbox.css' %}">
{% endblock %}

{% block body_includes %}
    {% include "main/toolbox.html" %}
{% endblock %}

{% block page_title %}
    {{ document.title_name }}
{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb _("Institutions") "main:institution_list" %}
    {% breadcrumb document.parent_ref_number.holding_institution document.parent_ref_number.holding_institution.get_absolute_url %}
    {% breadcrumb document.parent_ref_number document.parent_ref_number.get_absolute_url %}
    {% breadcrumb _('Document') '' %}
{% endblock %}

{% block content %}

    {% card 'doc_detail_overview' _('Overview') %}
        {% render_table tables.0 %}
        {% if request.user.is_authenticated %}
            {% if subscribed %}
                <a class="btn btn-primary btn-sm" href="{% url 'main:unsubscribe_document' document.pk %}" role="button">Unsubscribe from this document</a>
            {% else %}
                <a class="btn btn-primary btn-sm" href="{% url 'main:subscribe_document' document.pk %}" role="button">Subscribe to this document</a>
            {% endif %}
            &nbsp;&nbsp;<small>(Manage your subscriptions <a href="{% url 'main:subscriptions' %}">here</a>)</small>
        {% endif %}
    {% endcard %}

    {% card 'doc_detail_transcription' _('Transcript') %}
        {{ document.transcription_text|safe }}
    {% endcard %}

    {% card 'doc_detail_meta_data' _('Content Meta Data') %}
        {% render_table tables.1 %}
    {% endcard %}

    {% card 'doc_detail_description' _('Manuscript Description') %}
        {% render_table tables.2 %}
    {% endcard %}

    {% card 'doc_detail_comments' _('Comments and Links') %}
        {% render_table tables.3 %}
    {% endcard %}

{% endblock content %}

